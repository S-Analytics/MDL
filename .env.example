# MDL Application Configuration
# Copy this file to .env and update with your values

# ============================================
# Server Configuration
# ============================================
NODE_ENV=development
PORT=3000
HOST=localhost

# ============================================
# Storage Mode Configuration
# ============================================
# Options: 'local' or 'postgres'
STORAGE_MODE=postgres
PERSISTENCE_PATH=.mdl/metrics.json

# ============================================
# PostgreSQL Database Configuration
# ============================================
# Required when STORAGE_MODE=postgres
DB_HOST=localhost
DB_PORT=5432
DB_NAME=mdl
DB_USER=mdl
DB_PASSWORD=your_secure_password_here

# Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_CONNECTION_TIMEOUT=5000
DB_IDLE_TIMEOUT=30000

# ============================================
# Authentication Configuration
# ============================================
# Enable authentication endpoints (set to true to enable)
AUTH_ENABLED=false

# JWT Settings
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_ACCESS_TOKEN_EXPIRY=900
JWT_REFRESH_TOKEN_EXPIRY=604800

# User Storage
# Options: 'file' or 'postgres'
AUTH_STORAGE_MODE=file
AUTH_FILE_PATH=./data/users.json

# Default Admin User (for development)
DEFAULT_ADMIN_PASSWORD=Admin123!

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
# Options: fatal, error, warn, info, debug, trace

# File Logging
LOG_TO_FILE=true
LOG_DIR=./logs
LOG_FILE_NAME=mdl.log

# Log Rotation
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7

# Pretty Print (disable in production)
LOG_PRETTY=true

# ============================================
# Security Configuration
# ============================================
# CORS Settings
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Bcrypt Rounds (higher = more secure but slower)
BCRYPT_ROUNDS=10

# ============================================
# Monitoring & Health Checks
# ============================================
HEALTH_CHECK_INTERVAL=30000
DB_HEALTH_CHECK_ENABLED=true

# ============================================
# Performance & Optimization
# ============================================
# Redis Cache Configuration
# Note: Redis settings can be configured in the Settings panel (stored in .mdl/settings.json)
# These values are used as defaults/fallback if not configured in Settings panel
ENABLE_CACHE=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
CACHE_TTL=300
CACHE_MAX_TTL=3600

# Response Compression (Task 4)
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Performance Monitoring (Task 5)
ENABLE_PERFORMANCE_MONITORING=true
SLOW_REQUEST_THRESHOLD=1000
LOG_ALL_REQUESTS=false

# ============================================
# Feature Flags
# ============================================
# Optional Infrastructure Features
# Set to false to disable features that require external dependencies
FEATURE_REDIS_CACHE=true
FEATURE_PERFORMANCE_MONITORING=true
FEATURE_RESPONSE_COMPRESSION=true

# Prometheus Metrics (Phase 2D Task 1.3)
# Metrics are always enabled and exposed at /metrics endpoint
# Configure Prometheus to scrape: http://localhost:3000/metrics

# ============================================
# Distributed Tracing (Phase 2D Task 3)
# ============================================
# Enable/disable tracing (set to false to disable)
TRACING_ENABLED=true

# Jaeger Configuration
# OTLP HTTP endpoint (default: http://localhost:4318/v1/traces)
JAEGER_OTLP_ENDPOINT=http://localhost:4318/v1/traces

# Service Information
SERVICE_NAME=mdl-api
SERVICE_VERSION=1.0.0

# Application Features
FEATURE_BULK_OPERATIONS=false
FEATURE_ADVANCED_FILTERING=false
FEATURE_EXPORT_EXCEL=true
FEATURE_VISUALIZATION=true

# ============================================
# Development Settings
# ============================================
# Auto-create default admin user (development only)
DEV_CREATE_DEFAULT_USER=true
DEV_DEFAULT_USERNAME=admin
DEV_DEFAULT_PASSWORD=admin123
DEV_DEFAULT_EMAIL=admin@localhost

# Verbose Error Messages (disable in production)
VERBOSE_ERRORS=true
